{"title": "Whats the most anonymous active scanning technique? - Reconnaissance - 0x00sec - The Home of the Hacker", "users": ["http://0x00sec.org/u/SapereAude", "http://0x00sec.org/u/fxbg", "http://0x00sec.org/u/Nitrax", "http://0x00sec.org/u/pry0cc", "http://0x00sec.org/u/Techno_Forg", "http://0x00sec.org/u/SapereAude", "http://0x00sec.org/u/fxbg", "http://0x00sec.org/u/SapereAude", "http://0x00sec.org/u/Nitrax", "http://0x00sec.org/u/SapereAude", "http://0x00sec.org/u/0x00pf", "http://0x00sec.org/u/SapereAude", "http://0x00sec.org/u/0x00pf", "http://0x00sec.org/u/mf_redstars", "http://0x00sec.org/u/SapereAude", "http://0x00sec.org/u/mf_redstars", "http://0x00sec.org/u/nugget", "http://0x00sec.org/u/system"], "data": [{"author": "SapereAude", "speak": "Hello guys,That\u00e2\u20ac\u2122s my very first post here. I\u00e2\u20ac\u2122m new to hacking and I\u00e2\u20ac\u2122m learning the Reconnaissance phase. I\u00e2\u20ac\u2122m also completely new to Networking\u00e2\u20ac\u00a6 but I\u00e2\u20ac\u2122m always thinking how anonymize all my techniques. I would like to ask which are the most anonymous active recon technique that you guys are applying today.I already started doing a little research. Trying to figure it out, I gathered some interesting techniques that I would like to talk/share with you guys:Idle / Zombie ScanProxychains + Tor + NmapDecoy and Fragmentation attacksWell, since I\u00e2\u20ac\u2122m just learning, I\u00e2\u20ac\u2122m a little bit lost with all that info. My first intention was understand how could I anonymize the following tools on the network: SpiderFoot, ReconDog, Red Hawk v.2, Devploit, Sn1per, etc\u00e2\u20ac\u00a6But digging into it I found some technical issues about some techniques(nmap with proxy), for example:\u00e2\u20ac\u0153only normal TCP connections will be possible with the proxy, no SYN and FIN scan. (\u00e2\u20ac\u00a6) DNS lookup is not possible through the proxy\u00e2\u20ac\ufffd\u00e2\u20ac\u0153ICMP ping can not be done to see if a host is alive, since ICMP is not TCP. So you might need to skip the host discovery step if your targets are only accessible through the proxy (-Pn)\u00e2\u20ac\ufffdFrom here, I found:\u00e2\u20ac\u0153To hide the scanning computer\u00e2\u20ac\u2122s IP address, it was necessary to eliminate pinging by setting the \u00e2\u20ac\u201cPn flag. The \u00e2\u20ac\u201csT flag needed to be set in order to run the scan using TCP instead of UDP 4. The \u00e2\u20ac\u201csV flag allows for version scanning and does not leak the scanner\u00e2\u20ac\u2122s IP address. The \u00e2\u20ac\u201cO (OSDetection), and -A (OS detection, version detection, script scanning, and traceroute) did reveal the IP address because Nmap bypassed Proxychains during part of the execution\u00e2\u20ac\ufffdFrom my little research, almost all of the content was directed to \u00e2\u20ac\u0153Proxy + Tor + Nmap\u00e2\u20ac\ufffd, but what about the other tools? How can I manage them to run through Tor too? If Nmap + Tor doesn\u00e2\u20ac\u2122t accept SYN scan, OS detection, traceroute, etc (without reveal IP)\u00e2\u20ac\u00a6 how can I run an anonymous recon? The Idle Scan could handle the host discovering, but what about the rest of the recon? I was reading the post \u00e2\u20ac\u0153How to Become Anonymous like Notorious Blackhats - Stealthiest Setup\u00e2\u20ac\ufffd and saw that: \u00e2\u20ac\u0153don\u00e2\u20ac\u2122t hack over tor\u00e2\u20ac\ufffd so\u00e2\u20ac\u00a6 I\u00e2\u20ac\u2122m kind confused now. I really appreciate any opinion about that.Ps: Sorry if it is a silly question, or if it sounds script kiddie because of the tools, but I\u00e2\u20ac\u2122m really trying to understand and learn everything as possible here. So I really really really appreciate all answers from the Masters here! Ps2: Sorry if my question wasn\u00e2\u20ac\u2122t clear enough, english is not my main language."}, {"author": "fxbg", "speak": "I have never heard of any of the tools you mentioned but nmap and tor. I use proxychains for scans through nmap that I want anonymous. You can route just about anything through tor using proxychains. You can also use whatever proxies you want, not just tor, when using proxychains."}, {"author": "Nitrax", "speak": "Hi @SapereAude,Giving a straight answer is almost impossible. Indeed, beeing stealthy not relies entirely to your proxies setup, your machine must be hardened too in order to avoid network fingerprinting, etc.The best tip that I can give you is to setup a VPS then ask, to your provider, for a pentesting authorization. This will allow you to conduct aggressive scan forward your target from a legal manner. It is surely the best way to improve your knowledge as well as figure out your issue.P.S: Keep in mind that a lot of tools such as Nmap is not reliable behind proxies, triggering falsing and by consequence skewing your recon.Hope it helps.Best,Nitrax"}, {"author": "pry0cc", "speak": "Proxychains with a standard nmap scan will work. My question to you would be why you would need TCP syn scans? Of course, they\u00e2\u20ac\u2122re nice, but for ordinary recon, a standard nmap -A scan will do plenty.Another thing I would recommend looking into is hooking into the Shodan database. They\u00e2\u20ac\u2122ve scanned a lot of hosts slowly and with fragmentation, and they\u00e2\u20ac\u2122ve already done the hard work.Nmap actually has a NSE script to link in shodan, so potentially you could \u00e2\u20ac\u0153scan\u00e2\u20ac\ufffd a public IP just by querying the shodan database, and that is the stealthiest you can get.If you want something more aggressive. You may want to consider spinning up with a bulletproof host, or a VPS rented with cryptocurrency. This generally is what the bad guys will do. They\u00e2\u20ac\u2122ll spin up a host with a fake identity, do their dirty work, and then burn it. I am not condoning doing anything shady, if they want to catch you they could get you through a correlation attack, so always use tor when connecting/provisioning a \u00e2\u20ac\u02dcburnable box\u00e2\u20ac\u2122.On top of this idea. I have had the idea to use Ansible to quickly provision pentesting boxes. @fraq"}, {"author": "Techno_Forg", "speak": "Have you looked into FIN scan or a connection less scan? It\u00e2\u20ac\u2122s all based upon how the packets work (correct me if I\u00e2\u20ac\u2122m wrong)."}, {"author": "SapereAude", "speak": "First of all, thanks for all the answers! @fxbgYes, I\u00e2\u20ac\u2122m searching and learning about that. But my concern is about the IP leakage when Nmap bypasses the Proxychain during the part of the execution, as mentioned here@Nitrax Nitrax:your machine must be hardened too in order to avoid network fingerprinting, etc.Do you have any guide/link about that in hands to share? I would really appreciate that.About \u00e2\u20ac\u0153conduct aggressive scan\u00e2\u20ac\ufffd it\u00e2\u20ac\u2122s totally the opposite of what I\u00e2\u20ac\u2122m searching for. Sorry, but I would disagree with you about the best way to learn. In my opinion, I  think that try to achieve the most precise reconnaissance goals with anonymous methods requires the most solid understanding of work flow and core concepts of networking, which provides a much deeper comprehension about what the fuck you\u00e2\u20ac\u2122re doing, than just yelling for open ports. And of course, it doesn\u00e2\u20ac\u2122t necessarily means that\u00e2\u20ac\u2122s an illegal scan.  @pry0cc pry0cc:Proxychains with a standard nmap scan will work. My question to you would be why you would need TCP syn scans? Of course, they\u00e2\u20ac\u2122re nice, but for ordinary recon, a standard nmap -A scan will do plenty.Actually, the SYN and FIN scans were just examples of what Nmap with --proxy can\u00e2\u20ac\u2122t do. For my understanding, it\u00e2\u20ac\u2122s a bad thing, and that\u00e2\u20ac\u2122s what I\u00e2\u20ac\u2122m trying to learn here. Since SYN scan can be logged too with the right config, FIN scan would be the best choice if my focus is anonymize the scan. But like SYN, FIN is not possible. Which means that if I want use Nmap with proxy I would use TCP connect() method, that uses the full 3-way handshake to connect and it\u00e2\u20ac\u2122s easily spotted and logged.  As mentioned here, \"The \u00e2\u20ac\u201cO (OS Detection), and -A (OS detection, version detection, script scanning, and traceroute) did reveal the IP address because Nmap bypassed Proxychains during part of the execution. \"About Shodan, I never dig into it. I\u00e2\u20ac\u2122ll read about, thank you.@Techno_ForgI can\u00e2\u20ac\u2122t correct you since I\u00e2\u20ac\u2122m just learning it too  but what I can  s\u00cc\u00b6a\u00cc\u00b6y\u00cc\u00b6 copy about is that FIN scan employs the use of invalid packet header flags to elicit a response from a host regarding open ports."}, {"author": "fxbg", "speak": "The paper you posted describes which scans will leak the IP, you would simply avoid those combinations, which I don\u00e2\u20ac\u2122t use any of those anyway. Sometimes OS detection but that can be done through plenty of other techniques.Screenshot 2018-03-01 at 8.00.31 AM.png710x293 49.6 KB"}, {"author": "SapereAude", "speak": "fxbg:you would simply avoid those combinations, which I don\u00e2\u20ac\u2122t use any of those anywayWhat combinations do you use? What\u00e2\u20ac\u2122s your technique? fxbg:Sometimes OS detection but that can be done through plenty of other techniques.Yes, now I\u00e2\u20ac\u2122m trying to understand which kind of scan I necessarily need leak my IP address to obtain the specific recon goal\u00e2\u20ac\u00a6"}, {"author": "Nitrax", "speak": "Well, aggressive scan or others. The point of my post was to encourage you to test by yourself several scanning way in order to understand the inner working of networking as well as find the steathliest way to reach your goal  SapereAude:Do you have any guide/link about that in hands to share? I would really appreciate that.Will be posted soon"}, {"author": "SapereAude", "speak": "That\u00e2\u20ac\u2122s exactly what I\u00e2\u20ac\u2122m trying to learn. I\u00e2\u20ac\u2122m just trying to connect all the dots. At the moment, it\u00e2\u20ac\u2122s a lot of fucking dots floating around.  Nitrax:Will be posted soonPlease, let me be the first to know! Thanks for your help."}, {"author": "0x00pf", "speak": "SapereAude:Yes, I\u00e2\u20ac\u2122m searching and learning about that. But my concern is about the IP leakage when Nmap bypasses the Proxychain during the part of the execution, as mentioned hereIf you want to understand why/how nmap leaks IPs maybe these post two post may help you to get started:SELFPROMO MODE ONHow do those hackers' tools work? Proxychains Programming    Welcome to this new series intended to explain the guts of all those hacker\u00e2\u20ac\u2122s tools out there you use or want to use\u00e2\u20ac\u00a6 Basically, we are going to explain you how does they work and how do you can build your own\u00e2\u20ac\u00a6 Keep reading if you do not want to be a Skid ;). We will start the series with Proxychains. Before, keeping on reading, make sure you had read the 0x00sec introduction from @OilSlick to () ProxyChains. To understand how ProxyChains works we first need to understand how does a proxy work\u00e2\u20ac\u00a6  How do those hacking tools work? The Art of Port Scanning Networking    LEVEL: Beginner Port scanning is the process of finding out which ports are open in a given machine. An open port usually means a program listening on that port, and a program means bugs, and bugs means exploits\u00e2\u20ac\u00a6 roughly :). OK, everybody in the world uses nmap for this task. It would be stupid to write your own port scanner when such an advanced and polished tool is available. However, knowing how nmap does its magic and also, why not?, write your own simple scanner just for fun, are two valu\u00e2\u20ac\u00a6  SELFPROMO MODE OFF TL;DR;Normal HTTP proxies, as well as SOCKSv4, only support TCP traffic, therefore any nmap flag that requires the transmission of UDP or ICMP packets will just not go through the proxy connection. That\u00e2\u20ac\u2122s why, in your table you need to use -Pn to avoid leaking your IP by ICMP packets.SOCKSv5 supports UDP, but looks like nmap does not support that (not yet) so, also anything that sends UDP packets will also be transmitted outside the proxy connection and therefore leak your IP. This is what happens with the -O flag. This flag will force nmap to send some UDP packets even when you specify -sT. Check the nmap documentation or the man page for details.Anyway, as @Nitrax said, the best you can do is to try yourself and see what happens. You can use VMs or some cheap computer (Rpi) to set up a test environment and then just fire tcpdump at each end and see what you get.Hope it helps."}, {"author": "SapereAude", "speak": "@0x00pf Thanks a lot for sharing. I read both articles and now I understand much more about how anonymize my scanning (and searching for more). I\u00e2\u20ac\u2122m still learning, but maybe we can discuss more about some techniques and approaches in the future as I\u00e2\u20ac\u2122m testing and learning\u00e2\u20ac\u00a6 if you don\u00e2\u20ac\u2122t mind."}, {"author": "0x00pf", "speak": "SapereAude:I\u00e2\u20ac\u2122m still learning, but maybe we can discuss more about some techniques and approaches in the future as I\u00e2\u20ac\u2122m testing and learning\u00e2\u20ac\u00a6 if you don\u00e2\u20ac\u2122t mind. Sure\u00e2\u20ac\u00a6 that is exactly what this community is for"}, {"author": "mf_redstars", "speak": "I\u00e2\u20ac\u2122m not sure if anyone mentioned this, but try to also think of this from another angle. (Which is a core fundamental of infosec  )Research passive information gathering. The more information you have about the target the more ways you can reduce your  \u00e2\u20ac\u02dcactive information gathering\u00e2\u20ac\u2122. You could utilize tools like theharvester or sites like www.shodan.io which allows you to first check cached information without ever connecting to your target or target network."}, {"author": "SapereAude", "speak": "@mf_redstars Thanks for your suggestion, but as the title says, I\u00e2\u20ac\u2122m searching for an active scanning technique. I\u00e2\u20ac\u2122m trying to collect information that no more passive gathering can give."}, {"author": "mf_redstars", "speak": "Sure thing, good luck."}, {"author": "nugget", "speak": "just use reverse worm scanning, listen on every port on every protocol and mirror attacks back at the origin and link in to the stream for known protocols, lazy scanning"}, {"author": "system", "speak": "This topic was automatically closed after 30 days. New replies are no longer allowed."}]}